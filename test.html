<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.tailwindcss.com"></script>
  <title>CountDownly - Free Countdown Generator</title>
</head>
<body class="bg-gray-50 p-6">
  <!-- Form -->
  <div class="max-w-2xl mx-auto bg-white p-8 rounded-xl shadow">
    <h1 class="text-2xl font-bold mb-4">Create Your Countdown Timer</h1>
    <input type="text" id="eventName" placeholder="Event Name (e.g., Black Friday)" class="w-full p-3 mb-4 border rounded">
    <input type="datetime-local" id="eventDate" class="w-full p-3 mb-4 border rounded">
    <input type="color" id="eventColor" value="#000000" class="w-full p-3 mb-4">
    
    <button onclick="generateTimer()" class="bg-blue-600 text-white px-4 py-2 rounded">Generate Timer</button>
  </div>

  <!-- Preview -->
  <div id="preview" class="mt-8 max-w-2xl mx-auto"></div>

  <!-- Stripe Button -->
  <div class="text-center mt-8">
    <button onclick="stripeCheckout()" class="bg-green-500 text-white px-6 py-3 rounded">Upgrade to $10/month (Unlimited Timers)</button>
  </div>

  <script>
    function generateTimer() {
      const name = document.getElementById('eventName').value;
      const date = document.getElementById('eventDate').value;
      const color = document.getElementById('eventColor').value;
      
      const timerHTML = `
        <div style="font-family: Arial; color: ${color}; text-align: center;">
          <h2>${name}</h2>
          <div id="countdown" style="font-size: 2rem; margin: 20px 0;">
            <!-- Timer will appear here -->
          </div>
          <script>
            const deadline = "${date}";
            function updateTimer() {
              const now = new Date().getTime();
              const distance = new Date(deadline).getTime() - now;
              const days = Math.floor(distance / (1000 * 60 * 60 * 24));
              const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
              const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
              document.getElementById("countdown").innerHTML = 
                days + "d " + hours + "h " + minutes + "m";
            }
            setInterval(updateTimer, 1000);
          <\/script>
        </div>
      `;
      
      document.getElementById('preview').innerHTML = timerHTML;
      document.getElementById('preview').innerHTML += `
        <p class="mt-4">Embed code:</p>
        <textarea class="w-full p-3 border rounded" rows="5">${timerHTML}</textarea>
      `;
    }

    function stripeCheckout() {
      // Replace with your Stripe test key
      const stripe = Stripe('pk_test_12345');
      stripe.redirectToCheckout({
        lineItems: [{ price: 'price_12345', quantity: 1 }],
        mode: 'subscription',
        successUrl: 'https://countdownly.com/success',
        cancelUrl: 'https://countdownly.com/cancel',
      });
    }
  </script>
</body>
</html>